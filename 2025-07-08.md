
## ## ğŸ“Œ **JDBC(Java Database Connectivity) í•µì‹¬ ê°œë… ì •ë¦¬**

### **JDBCë€?**

- Javaì—ì„œ **DBMSì— ì ‘ê·¼**í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” **API**
    
- DB ì—°ê²° â†’ SQL ì‹¤í–‰ â†’ ê²°ê³¼ ì²˜ë¦¬ â†’ ìì› í•´ì œ ê³¼ì •ì„ ê±°ì¹¨
    

---

### **JDBC ê¸°ë³¸ ì ˆì°¨**

#### ğŸ“1) **ë“œë¼ì´ë²„ ë¡œë”©**



```JAVA
Class.forName("com.mysql.cj.jdbc.Driver");
```

- MySQL ë“œë¼ì´ë²„ í´ë˜ìŠ¤ë¥¼ JVMì— ë¡œë”©
    
- ìµœì‹  JDBCëŠ” ìƒëµ ê°€ëŠ¥í•˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ì“°ë©´ ëª…í™•í•¨
    

---

#### ğŸ“2) **DB ì—°ê²°**


```JAVA
String url = "jdbc:mysql://localhost:3306/shopdb";
Connection conn = DriverManager.getConnection(url, "smuser", "1q2w3e@@");
```

- `url`: `jdbc:DBì¢…ë¥˜://í˜¸ìŠ¤íŠ¸:í¬íŠ¸/DBëª…`
    
- `Connection`: DB ì—°ê²° ê°ì²´
    

---

#### ğŸ“3) **SQL ë¬¸ ì¤€ë¹„**


```JAVA
String insertSql = "INSERT INTO cust VALUES (?, ?, ?, NOW(), NOW())";
PreparedStatement pstmt = conn.prepareStatement(insertSql);
```

- **PreparedStatement**: SQL ë¬¸ì„ ë¯¸ë¦¬ ì»´íŒŒì¼í•˜ì—¬ ì„±ëŠ¥ í–¥ìƒ ë° ë³´ì•ˆâ†‘
    
- `?`: ë°”ì¸ë”© íŒŒë¼ë¯¸í„°, ì…ë ¥ ê°’ì€ `setXXX()` ë©”ì„œë“œë¡œ ì„¤ì •
    

---

#### ğŸ“4) **SQL ì‹¤í–‰**


```JAVA
pstmt.setString(1, "id22");
pstmt.setString(2, "pwd22");
pstmt.setString(3, "ì¼ë§ìˆ™");

int result = pstmt.executeUpdate();
System.out.println("result = " + result);

```

- `executeUpdate()`: `INSERT`, `UPDATE`, `DELETE` ë“± ì‹¤í–‰ (ë°˜í™˜ê°’ì€ ì˜í–¥ ë°›ì€ í–‰ ìˆ˜)
    

---

#### ğŸ“5) **ìì› í•´ì œ**



```JAVA
pstmt.close(); 
conn.close();
```

- ìì› ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•´ `finally` ë¸”ë¡ì—ì„œ `close()` ì²˜ë¦¬ í•„ìˆ˜
    

---

### **ì˜¤ë¥˜ ì²˜ë¦¬**

```JAVA
catch (SQLException e) {
    e.printStackTrace();
}
```

- **SQL ì˜¤ë¥˜**ë¥¼ ì¡ê¸° ìœ„í•œ `SQLException` ì˜ˆì™¸ ì²˜ë¦¬
    
- ë“œë¼ì´ë²„ ë¡œë”© ì‹¤íŒ¨ ì‹œì—ëŠ” `ClassNotFoundException` ì²˜ë¦¬
    

---

### **ì£¼ì˜ ì‚¬í•­**

- DB ì—°ê²° ì‹œ `port`, `schema`, `username`, `password` ì •í™•íˆ ì…ë ¥
    
- `NOW()`ëŠ” MySQLì˜ í˜„ì¬ ì‹œê°„ í•¨ìˆ˜ â†’ ë“±ë¡ì¼/ìˆ˜ì •ì¼ ë“± ìë™ ì…ë ¥ ê°€ëŠ¥
    
- `PreparedStatement`ëŠ” SQL Injection ë°©ì§€ì— íš¨ê³¼ì ì„
    

---

###  ì˜ˆì‹œ í…Œì´ë¸” êµ¬ì¡° (`cust`)


```MYSQL
CREATE TABLE cust (
    id VARCHAR(20) PRIMARY KEY,
    pwd VARCHAR(20),
    name VARCHAR(50),
    regdate DATETIME,
    editdate DATETIME
);
```

---
### `close()` ê´€ë ¨ **ì£¼ì˜ì‚¬í•­ ë° íŒ**

#### ğŸ”¹ 1) **í•­ìƒ ìì›ì€ ë°˜ë‚©í•´ì•¼ í•œë‹¤**

- `Connection`, `PreparedStatement`, `ResultSet`ì€ **ìì›ì„ ë§ì´ ì†Œëª¨**í•˜ëŠ” ê°ì²´ì„
    
- DB ì—°ê²°ì„ ì˜¤ë˜ ìœ ì§€í•˜ë©´ **Connection Pool ê³ ê°ˆ, ì„±ëŠ¥ ì €í•˜** ë°œìƒ
    

#### ğŸ”¹ 2) **`finally` ë¸”ë¡ì—ì„œ ë‹«ê¸°**

```JAVA
finally {
    if (pstmt != null) try { pstmt.close(); } catch (SQLException e) { e.printStackTrace(); }
    if (conn != null) try { conn.close(); } catch (SQLException e) { e.printStackTrace(); }
}
```

- **null ì²´í¬ í•„ìˆ˜**: ê°ì²´ ìƒì„± ì „ì— ì˜ˆì™¸ ë°œìƒ ì‹œ `NullPointerException` ë°©ì§€
    
- **catch ì²˜ë¦¬ í•„ìˆ˜**: `close()` ìì²´ë„ `SQLException` ë°œìƒ ê°€ëŠ¥
    

#### ğŸ”¹ 3) **ë‹«ëŠ” ìˆœì„œ**

- ìƒì„±ì˜ **ì—­ìˆœìœ¼ë¡œ ë‹«ê¸°**
    
    `ResultSet â†’ PreparedStatement â†’ Connection`
    
    > `ResultSet`ì´ ë¨¼ì € ë‹«í˜€ì•¼ `PreparedStatement`ê°€ ì•ˆì „í•˜ê²Œ ë‹«í˜  
    > `PreparedStatement` ë‹«ì•„ì•¼ `Connection`ë„ ì œëŒ€ë¡œ ë°˜ë‚© ê°€ëŠ¥